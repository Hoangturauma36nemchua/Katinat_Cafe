<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>ThÃªm sáº£n pháº©m - Katinat Cafe</title>
    <style>
        /* --- Pháº§n Hiá»‡u á»¨ng Tuyáº¿t RÆ¡i --- */
        body { position: relative; overflow: hidden; }
        .snow { position: absolute; top: -20px; background: white; border-radius: 50%; opacity: 0.8; animation: fall linear infinite; }
        @keyframes fall { 0% { transform: translateY(0); } 100% { transform: translateY(105vh); } }
        .snow:nth-child(1) { width: 5px; height: 5px; left: 10%; animation-duration: 10s; animation-delay: -3s; }
        .snow:nth-child(2) { width: 3px; height: 3px; left: 20%; animation-duration: 12s; animation-delay: -1s; }
        .snow:nth-child(3) { width: 6px; height: 6px; left: 30%; animation-duration: 8s;  animation-delay: -5s; }
        .snow:nth-child(4) { width: 4px; height: 4px; left: 40%; animation-duration: 15s; animation-delay: -7s; }
        .snow:nth-child(5) { width: 3px; height: 3px; left: 50%; animation-duration: 10s; animation-delay: -4s; }
        .snow:nth-child(6) { width: 5px; height: 5px; left: 60%; animation-duration: 9s;  animation-delay: -2s; }
        .snow:nth-child(7) { width: 2px; height: 2px; left: 70%; animation-duration: 13s; animation-delay: -6s; }
        .snow:nth-child(8) { width: 6px; height: 6px; left: 80%; animation-duration: 7s;  animation-delay: -1.5s; }
        .snow:nth-child(9) { width: 4px; height: 4px; left: 90%; animation-duration: 11s; animation-delay: -8s; }
        .snow:nth-child(10){ width: 3px; height: 3px; left: 95%; animation-duration: 14s; animation-delay: -4s; }
        .snow-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 1; } 

        /* --- Hiá»‡u á»©ng xe Tuáº§n Lá»™c (Pháº£i -> TrÃ¡i) --- */
        .sleigh-animation {
            position: fixed;
            bottom: 20px; 
            font-size: 40px; 
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
            z-index: 10; 
            pointer-events: none;
            width: 600px; /* Äá»™ dÃ i Ä‘oÃ n xe */
            white-space: nowrap; /* NgÄƒn rá»›t dÃ²ng */
            animation: sleigh-ride-R-L 20s linear infinite;
        }
        @keyframes sleigh-ride-R-L {
            0% { transform: translateX(100vw); }
            100% { transform: translateX(-600px); }
        }
        
        /* --- Giao diá»‡n (Ná»n Ä‘á», form tráº¯ng) --- */
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #a7001e, #6a0013); /* Ná»n Ä‘á» Noel */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            position: relative;
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            width: 400px;
            text-align: center;
            z-index: 5;
        }
        h2 { font-size: 2rem; color: #333; margin-bottom: 2rem; font-weight: 600; }
        .form-group { margin-bottom: 1.5rem; text-align: left; }
        label { display: block; margin-bottom: 0.5rem; color: #555; font-weight: 500; }
        input { width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        button {
            width: 100%;
            padding: 0.9rem;
            border: none;
            border-radius: 5px;
            background-color: #28a745; /* MÃ u xanh lÃ¡ */
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
        }
        button:hover { background-color: #218838; }
        a { color: #f0f0f0; text-decoration: none; display: block; text-align: center; margin-top: 1.5rem; font-weight: 500; }
        .message { display: none; padding: 0.75rem; border-radius: 5px; margin-bottom: 1rem; }
        .success-msg { background-color: #d4edda; color: #155724; }
        .error-msg { background-color: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="sleigh-animation">âœ¨ğŸ„ğŸğŸ¦ŒğŸ¦ŒğŸ¦ŒğŸ›·ğŸğŸ„âœ¨</div>

    <div class="snow-container" aria-hidden="true">
        <div class="snow"></div> <div class="snow"></div> <div class="snow"></div>
        <div class="snow"></div> <div class="snow"></div> <div class="snow"></div>
        <div class="snow"></div> <div class="snow"></div> <div class="snow"></div>
        <div class="snow"></div>
    </div>
    
    <div class="container">
        <form id="add-form">
            <h2>ThÃªm sáº£n pháº©m má»›i ğŸ</h2>
            <div id="message-box" class="message"></div>
            <div class="form-group">
                <label for="product_name">TÃªn sáº£n pháº©m:</label>
                <input type="text" id="product_name" name="product_name" required>
            </div>
            <div class="form-group">
                <label for="price">GiÃ¡ (VND):</label>
                <input type="number" id="price" name="price" min="0" required>
            </div>
            <div class="form-group">
                <label for="quantity">Sá»‘ lÆ°á»£ng trong kho:</label>
                <input type="number" id="quantity" name="quantity" min="0" required>
            </div>
            <div class="form-group">
                <button type="submit" id="submit-btn">ThÃªm sáº£n pháº©m</button>
            </div>
        </form>
        <a href="index.html">Quay vá» Dashboard</a>
    </div>

    <script>
        document.getElementById('add-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const messageBox = document.getElementById('message-box');
            const submitBtn = document.getElementById('submit-btn');

            submitBtn.disabled = true;
            submitBtn.innerText = 'Äang thÃªm...';

            fetch('../php/add.php', { method: 'POST', body: formData }) 
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    messageBox.innerText = 'ThÃªm thÃ nh cÃ´ng! Äang quay vá»...';
                    messageBox.className = 'message success-msg';
                    form.reset();
                    setTimeout(() => window.location.href = 'index.html', 2000);
                } else {
                    messageBox.innerText = 'Lá»—i: ' + (data.message || 'KhÃ´ng thá»ƒ thÃªm.');
                    messageBox.className = 'message error-msg';
                }
            })
            .catch(error => {
                messageBox.innerText = 'Lá»—i káº¿t ná»‘i.';
                messageBox.className = 'message error-msg';
            })
            .finally(() => {
                messageBox.style.display = 'block';
                submitBtn.disabled = false;
                submitBtn.innerText = 'ThÃªm sáº£n pháº©m';
            });
        });
    </script>
</body>
</html>